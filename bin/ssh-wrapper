#!/usr/bin/env bash

set -e

ssh_config_path() {
  if [ -z "$SSH_CONFIG" ]; then
    echo "$HOME/.ssh/config"
  else
    echo "$SSH_CONFIG"
  fi
}

main() {
  local -r command="$1"
  local -r config=$(ssh_config_path)

  case "$1" in
    edit )
      $EDITOR $config
      ;;

    * )
      command ssh -F $config $*
      ;;
  esac
}
main "$*"
